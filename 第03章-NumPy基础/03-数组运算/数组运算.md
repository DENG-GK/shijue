# æ•°ç»„è¿ç®—

> NumPy çš„å‘é‡åŒ–è¿ç®—æ¯” Python å¾ªç¯å¿«å‡ åå€ï¼Œæ˜¯å›¾åƒå¤„ç†é«˜æ€§èƒ½çš„å…³é”®ã€‚è°ƒæ•´äº®åº¦ã€æ··åˆå›¾åƒã€åº”ç”¨æ»¤æ³¢â€”â€”è¿™äº›æ“ä½œçš„æœ¬è´¨éƒ½æ˜¯æ•°ç»„è¿ç®—ã€‚

---

## ğŸ“– ç†è®ºéƒ¨åˆ†

### 1. ä»€ä¹ˆæ˜¯å‘é‡åŒ–è¿ç®—ï¼Ÿ

åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹**æ¯ä¸ªåƒç´ **åšç›¸åŒçš„æ“ä½œã€‚æ¯”å¦‚"æŠŠæ‰€æœ‰åƒç´ äº®åº¦åŠ  50"ï¼š

```python
import numpy as np

image = np.random.randint(0, 200, (480, 640), dtype=np.uint8)

# âŒ Python å¾ªç¯ï¼šé€åƒç´ å¤„ç†ï¼ˆéå¸¸æ…¢ï¼ï¼‰
result = np.zeros_like(image)
for y in range(480):
    for x in range(640):
        result[y, x] = min(image[y, x] + 50, 255)
# éœ€è¦å¤„ç† 307,200 ä¸ªåƒç´ ï¼Œå¯èƒ½è¦å¥½å‡ ç§’

# âœ… NumPy å‘é‡åŒ–ï¼šä¸€è¡Œæå®šï¼ˆå¿« 50~100 å€ï¼ï¼‰
result = np.clip(image.astype(np.int16) + 50, 0, 255).astype(np.uint8)
```

**å‘é‡åŒ– = ä¸ç”¨å†™å¾ªç¯ï¼Œç›´æ¥å¯¹æ•´ä¸ªæ•°ç»„åšè¿ç®—ã€‚** NumPy åœ¨åº•å±‚ç”¨ C è¯­è¨€ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰å…ƒç´ ã€‚

---

### 2. ç®—æœ¯è¿ç®—ï¼ˆé€å…ƒç´ ï¼‰

NumPy æ•°ç»„çš„ç®—æœ¯è¿ç®—æ˜¯**é€å…ƒç´ **çš„ï¼ˆelement-wiseï¼‰ï¼Œæ¯ä¸ªä½ç½®çš„å…ƒç´ åˆ†åˆ«åšè¿ç®—ã€‚

#### 2.1 åŸºæœ¬ç®—æœ¯

```python
a = np.array([10, 20, 30, 40, 50])
b = np.array([1,  2,  3,  4,  5])

# åŠ æ³•
print(a + b)       # [11 22 33 44 55]

# å‡æ³•
print(a - b)       # [ 9 18 27 36 45]

# ä¹˜æ³•ï¼ˆé€å…ƒç´ ï¼Œä¸æ˜¯çŸ©é˜µä¹˜æ³•ï¼ï¼‰
print(a * b)       # [ 10  40  90 160 250]

# é™¤æ³•
print(a / b)       # [10. 10. 10. 10. 10.]  ç»“æœæ˜¯æµ®ç‚¹æ•°

# æ•´é™¤
print(a // b)      # [10 10 10 10 10]

# å–ä½™
print(a % b)       # [0 0 0 0 0]

# å¹‚è¿ç®—
print(b ** 2)      # [ 1  4  9 16 25]
```

#### 2.2 æ ‡é‡è¿ç®—ï¼ˆæ•°ç»„ + æ•°å­—ï¼‰

```python
pixels = np.array([100, 150, 200, 50, 80], dtype=np.uint8)

# äº®åº¦è°ƒæ•´ï¼ˆæ¯ä¸ªåƒç´ åŠ ä¸€ä¸ªå€¼ï¼‰
brighter = pixels.astype(np.int16) + 50    # å…ˆè½¬ int16 é˜²æº¢å‡º
dimmer = pixels.astype(np.int16) - 30

# å¯¹æ¯”åº¦è°ƒæ•´ï¼ˆæ¯ä¸ªåƒç´ ä¹˜ä¸€ä¸ªç³»æ•°ï¼‰
high_contrast = pixels.astype(np.float32) * 1.5

# å½’ä¸€åŒ–ï¼ˆé™¤ä»¥255ï¼‰
normalized = pixels.astype(np.float32) / 255.0
print(normalized)   # [0.392 0.588 0.784 0.196 0.314]
```

> ğŸ’¡ **å›¾åƒäº®åº¦è°ƒæ•´çš„æœ¬è´¨ï¼š** å°±æ˜¯ç»™æ¯ä¸ªåƒç´ å€¼åŠ /å‡ä¸€ä¸ªå¸¸æ•°ã€‚å¯¹æ¯”åº¦è°ƒæ•´å°±æ˜¯ä¹˜/é™¤ä¸€ä¸ªç³»æ•°ã€‚

#### 2.3 å›¾åƒæ··åˆï¼ˆåŠ æƒæ±‚å’Œï¼‰

```python
# ä¸¤å¼ å›¾åƒæ··åˆï¼šresult = Î± * img1 + Î² * img2 + Î³
# è¿™å°±æ˜¯ OpenCV çš„ cv2.addWeighted() çš„åŸç†ï¼

img1 = np.random.randint(0, 256, (100, 100), dtype=np.uint8)
img2 = np.random.randint(0, 256, (100, 100), dtype=np.uint8)

alpha = 0.7   # ç¬¬ä¸€å¼ å›¾çš„æƒé‡
beta = 0.3    # ç¬¬äºŒå¼ å›¾çš„æƒé‡

# æ··åˆï¼ˆæ³¨æ„ç±»å‹è½¬æ¢é˜²æº¢å‡ºï¼‰
blended = (img1.astype(np.float32) * alpha +
           img2.astype(np.float32) * beta)
blended = np.clip(blended, 0, 255).astype(np.uint8)

# ç­‰ä»·äº OpenCV å†™æ³•ï¼š
# blended = cv2.addWeighted(img1, alpha, img2, beta, 0)
```

---

### 3. æ¯”è¾ƒè¿ç®—

æ¯”è¾ƒè¿ç®—è¿”å›**å¸ƒå°”æ•°ç»„**ï¼Œè¿™åœ¨ä¸Šä¸€èŠ‚çš„å¸ƒå°”ç´¢å¼•ä¸­å·²ç»ç”¨åˆ°äº†ï¼š

```python
a = np.array([10, 50, 100, 150, 200])

print(a > 100)     # [False False False  True  True]
print(a == 100)    # [False False  True False False]
print(a != 50)     # [ True False  True  True  True]
print(a >= 100)    # [False False  True  True  True]
```

**å®é™…åº”ç”¨ï¼šåˆ›å»ºæ©è†œï¼ˆmaskï¼‰**

```python
image = np.random.randint(0, 256, (100, 100), dtype=np.uint8)

# åˆ›å»ºå‰æ™¯æ©è†œï¼šäº®åº¦ > 128 çš„åŒºåŸŸ
foreground_mask = (image > 128).astype(np.uint8) * 255

# ç”¨æ©è†œæå–å‰æ™¯
foreground = image.copy()
foreground[image <= 128] = 0   # èƒŒæ™¯è®¾ä¸ºé»‘è‰²
```

---

### 4. å¹¿æ’­æœºåˆ¶ï¼ˆBroadcastingï¼‰â€”â€”NumPy çš„æ ¸å¿ƒç‰¹æ€§

å¹¿æ’­æ˜¯ NumPy æœ€å¼ºå¤§ä¹Ÿæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ã€‚å½“ä¸¤ä¸ªå½¢çŠ¶ä¸åŒçš„æ•°ç»„åšè¿ç®—æ—¶ï¼ŒNumPy ä¼šè‡ªåŠ¨"æ‰©å±•"è¾ƒå°çš„æ•°ç»„ï¼Œä½¿å®ƒä»¬çš„å½¢çŠ¶å…¼å®¹ã€‚

#### 4.1 æ ‡é‡å¹¿æ’­ï¼ˆæœ€ç®€å•çš„æƒ…å†µï¼‰

```python
arr = np.array([[1, 2, 3],
                [4, 5, 6]])    # shape: (2, 3)

# æ ‡é‡ 10 è¢«è‡ªåŠ¨"æ‰©å±•"æˆ (2, 3) çš„æ•°ç»„
result = arr + 10
print(result)
# [[11 12 13]
#  [14 15 16]]
```

```
å¹¿æ’­è¿‡ç¨‹ï¼š

  [[1, 2, 3],      [[10, 10, 10],      [[11, 12, 13],
   [4, 5, 6]]  +    [10, 10, 10]]  =    [14, 15, 16]]

  (2, 3)            æ ‡é‡10è¢«æ‰©å±•         (2, 3)
                    ä¸º(2, 3)
```

#### 4.2 å‘é‡ä¸çŸ©é˜µçš„å¹¿æ’­

```python
# çŸ©é˜µ (2, 3) + è¡Œå‘é‡ (3,) â†’ æ¯ä¸€è¡Œéƒ½åŠ ä¸Šè¿™ä¸ªå‘é‡
matrix = np.array([[1, 2, 3],
                   [4, 5, 6]])     # (2, 3)
row_vec = np.array([10, 20, 30])   # (3,)

result = matrix + row_vec
print(result)
# [[11 22 33]
#  [14 25 36]]
```

```
å¹¿æ’­è¿‡ç¨‹ï¼š

  [[1, 2, 3],      [[10, 20, 30],      [[11, 22, 33],
   [4, 5, 6]]  +    [10, 20, 30]]  =    [14, 25, 36]]

  (2, 3)            (3,) è¢«å¤åˆ¶         (2, 3)
                    åˆ°æ¯ä¸€è¡Œ
```

#### 4.3 åˆ—å‘é‡ä¸çŸ©é˜µçš„å¹¿æ’­

```python
# çŸ©é˜µ (2, 3) + åˆ—å‘é‡ (2, 1) â†’ æ¯ä¸€åˆ—éƒ½åŠ ä¸Šè¿™ä¸ªå‘é‡
matrix = np.array([[1, 2, 3],
                   [4, 5, 6]])      # (2, 3)
col_vec = np.array([[10],
                    [20]])          # (2, 1)

result = matrix + col_vec
print(result)
# [[11 12 13]
#  [24 25 26]]
```

```
å¹¿æ’­è¿‡ç¨‹ï¼š

  [[1, 2, 3],      [[10, 10, 10],      [[11, 12, 13],
   [4, 5, 6]]  +    [20, 20, 20]]  =    [24, 25, 26]]

  (2, 3)            (2, 1) è¢«å¤åˆ¶       (2, 3)
                    åˆ°æ¯ä¸€åˆ—
```

#### 4.4 å¹¿æ’­è§„åˆ™

NumPy ä»**æœ€å³è¾¹çš„ç»´åº¦**å¼€å§‹é€ä¸€æ¯”è¾ƒï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€å³å¯å¹¿æ’­ï¼š

1. **ç»´åº¦å¤§å°ç›¸åŒ**
2. **å…¶ä¸­ä¸€ä¸ªç»´åº¦ä¸º 1**ï¼ˆä¼šè¢«è‡ªåŠ¨æ‰©å±•ï¼‰

```
ç¤ºä¾‹1: (2, 3) + (3,)     â†’ âœ… å¯ä»¥å¹¿æ’­
  æ¯”è¾ƒ: 3 == 3 âœ“, ç¼ºå¤±çš„ç»´åº¦è‡ªåŠ¨è¡¥1 â†’ (1, 3) â†’ æ‰©å±•ä¸º (2, 3)

ç¤ºä¾‹2: (2, 3) + (2, 1)   â†’ âœ… å¯ä»¥å¹¿æ’­
  æ¯”è¾ƒ: 3 vs 1 (1å¯ä»¥æ‰©å±•) âœ“, 2 == 2 âœ“

ç¤ºä¾‹3: (2, 3) + (2,)     â†’ âŒ ä¸èƒ½å¹¿æ’­
  æ¯”è¾ƒ: 3 vs 2 (ä¸ç›¸ç­‰ä¸”éƒ½ä¸ä¸º1) âœ—

ç¤ºä¾‹4: (4, 3) + (3,)     â†’ âœ… å¯ä»¥å¹¿æ’­
ç¤ºä¾‹5: (4, 1, 3) + (5, 3) â†’ âœ… å¯ä»¥å¹¿æ’­ â†’ ç»“æœ (4, 5, 3)
```

#### 4.5 å¹¿æ’­åœ¨å›¾åƒå¤„ç†ä¸­çš„åº”ç”¨

```python
# åº”ç”¨1ï¼šæ¯ä¸ªé€šé“å‡å»å‡å€¼ï¼ˆå›¾åƒå½’ä¸€åŒ–ï¼‰
image = np.random.randint(0, 256, (480, 640, 3), dtype=np.uint8)
mean_bgr = np.array([103.94, 116.78, 123.68])   # ImageNet å‡å€¼ (BGR)

# image: (480, 640, 3), mean: (3,)
# å¹¿æ’­ï¼š(3,) è‡ªåŠ¨æ‰©å±•ä¸º (480, 640, 3)
normalized = image.astype(np.float32) - mean_bgr
print(normalized.shape)  # (480, 640, 3)

# åº”ç”¨2ï¼šæ¯è¡Œä¹˜ä»¥ä¸åŒçš„æƒé‡
# æ¯”å¦‚ï¼šç»™å›¾åƒçš„ä¸ŠåŠéƒ¨åˆ†åŠ æƒæ›´å¤šï¼ˆæ¸å˜æ•ˆæœï¼‰
h, w = 100, 150
weights = np.linspace(1.0, 0.0, h).reshape(h, 1)   # (100, 1) åˆ—å‘é‡
gray_image = np.ones((h, w), dtype=np.float32) * 200

# (100, 150) * (100, 1) â†’ å¹¿æ’­ä¸º (100, 150)
gradient_image = gray_image * weights
# ç»“æœï¼šä¸Šé¢äº®ï¼Œä¸‹é¢æš—ï¼Œæ¸å˜æ•ˆæœ
```

> ğŸ’¡ **å¹¿æ’­çš„å¥½å¤„ï¼š** ä¸éœ€è¦æ‰‹åŠ¨å¤åˆ¶æ•°ç»„æ¥åŒ¹é…å½¢çŠ¶ï¼ŒNumPy è‡ªåŠ¨å¤„ç†ï¼Œæ—¢ç®€æ´åˆé«˜æ•ˆï¼ˆä¸ä¼šçœŸçš„å¤åˆ¶æ•°æ®ï¼ŒèŠ‚çœå†…å­˜ï¼‰ã€‚

---

### 5. é€šç”¨å‡½æ•°ï¼ˆufuncï¼‰

NumPy æä¾›äº†å¤§é‡çš„æ•°å­¦å‡½æ•°ï¼Œå®ƒä»¬éƒ½æ˜¯**é€å…ƒç´ **æ“ä½œçš„ï¼š

#### 5.1 å¸¸ç”¨æ•°å­¦å‡½æ•°

```python
arr = np.array([0, 30, 45, 60, 90])

# ä¸‰è§’å‡½æ•°ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼ï¼‰
radians = np.deg2rad(arr)        # è§’åº¦ â†’ å¼§åº¦
print(np.sin(radians))           # [0.   0.5  0.707 0.866 1.  ]
print(np.cos(radians))           # [1.   0.866 0.707 0.5   0.  ]

# æŒ‡æ•°å’Œå¯¹æ•°
print(np.exp([0, 1, 2]))         # [1.    2.718 7.389]
print(np.log([1, np.e, np.e**2]))  # [0. 1. 2.]ï¼ˆè‡ªç„¶å¯¹æ•°ï¼‰
print(np.log2([1, 2, 4, 8]))    # [0. 1. 2. 3.]
print(np.log10([1, 10, 100]))    # [0. 1. 2.]

# å¹³æ–¹æ ¹
print(np.sqrt([4, 9, 16, 25]))  # [2. 3. 4. 5.]

# ç»å¯¹å€¼
print(np.abs([-5, -3, 0, 3, 5]))  # [5 3 0 3 5]

# å–æ•´
print(np.floor([1.7, 2.3, 3.9]))  # [1. 2. 3.]ï¼ˆå‘ä¸‹å–æ•´ï¼‰
print(np.ceil([1.7, 2.3, 3.9]))   # [2. 3. 4.]ï¼ˆå‘ä¸Šå–æ•´ï¼‰
print(np.round([1.7, 2.3, 3.5]))  # [2. 2. 4.]ï¼ˆå››èˆäº”å…¥ï¼‰
```

#### 5.2 è£å‰ªå’Œé™åˆ¶

```python
# np.clip â€” å›¾åƒå¤„ç†ä¸­æœ€å¸¸ç”¨çš„å‡½æ•°ä¹‹ä¸€ï¼
arr = np.array([-50, 0, 100, 200, 300, 500])

# è£å‰ªåˆ° [0, 255]ï¼ˆç¡®ä¿åˆæ³•çš„åƒç´ å€¼èŒƒå›´ï¼‰
clipped = np.clip(arr, 0, 255)
print(clipped)   # [  0   0 100 200 255 255]

# np.minimum / np.maximum â€” é€å…ƒç´ å–è¾ƒå°/è¾ƒå¤§å€¼
a = np.array([10, 50, 200])
b = np.array([30, 30, 30])
print(np.minimum(a, b))   # [10 30 30]
print(np.maximum(a, b))   # [30 50 200]
```

---

### 6. ç»Ÿè®¡è¿ç®—

ç»Ÿè®¡å‡½æ•°åœ¨å›¾åƒåˆ†æä¸­éå¸¸é‡è¦â€”â€”è®¡ç®—å›¾åƒçš„å¹³å‡äº®åº¦ã€æœ€å¤§æœ€å°å€¼ã€æ ‡å‡†å·®ç­‰ã€‚

#### 6.1 åŸºæœ¬ç»Ÿè®¡å‡½æ•°

```python
image = np.array([
    [100, 150, 200],
    [ 50,  80, 120],
    [180, 220, 255]
], dtype=np.uint8)

# å…¨å±€ç»Ÿè®¡
print(f"æ€»å’Œ:   {np.sum(image)}")         # 1355
print(f"å‡å€¼:   {np.mean(image):.1f}")    # 150.6
print(f"æ ‡å‡†å·®: {np.std(image):.1f}")     # 62.4
print(f"æœ€å¤§å€¼: {np.max(image)}")         # 255
print(f"æœ€å°å€¼: {np.min(image)}")         # 50
print(f"ä¸­ä½æ•°: {np.median(image):.1f}")  # 150.0
```

#### 6.2 æŒ‰è½´ç»Ÿè®¡ï¼ˆaxis å‚æ•°ï¼‰

`axis` å‚æ•°è®©ä½ æ²¿ç€ç‰¹å®šç»´åº¦åšç»Ÿè®¡â€”â€”è¿™åœ¨å›¾åƒå¤„ç†ä¸­éå¸¸æœ‰ç”¨ï¼š

```python
image = np.array([
    [100, 150, 200],
    [ 50,  80, 120],
    [180, 220, 255]
])

# axis=0ï¼šæ²¿è¡Œæ–¹å‘ï¼ˆçºµå‘ï¼‰â†’ ç»“æœæ˜¯æ¯åˆ—çš„ç»Ÿè®¡å€¼
col_mean = np.mean(image, axis=0)
print(f"æ¯åˆ—å‡å€¼: {col_mean}")   # [110.  150.  191.7]

# axis=1ï¼šæ²¿åˆ—æ–¹å‘ï¼ˆæ¨ªå‘ï¼‰â†’ ç»“æœæ˜¯æ¯è¡Œçš„ç»Ÿè®¡å€¼
row_mean = np.mean(image, axis=1)
print(f"æ¯è¡Œå‡å€¼: {row_mean}")   # [150.   83.3 218.3]
```

```
axis å‚æ•°å›¾è§£ï¼š

         åˆ—0   åˆ—1   åˆ—2
è¡Œ0  [  100,  150,  200 ]  â†’ axis=1: æ¯è¡Œçš„å‡å€¼
è¡Œ1  [   50,   80,  120 ]
è¡Œ2  [  180,  220,  255 ]
         â†“     â†“     â†“
       axis=0: æ¯åˆ—çš„å‡å€¼

axis=0: æ²¿ç¬¬0ç»´ï¼ˆè¡Œï¼‰æ–¹å‘"å‹ç¼©" â†’ ç»“æœå½¢çŠ¶å°‘äº†è¡Œç»´åº¦
axis=1: æ²¿ç¬¬1ç»´ï¼ˆåˆ—ï¼‰æ–¹å‘"å‹ç¼©" â†’ ç»“æœå½¢çŠ¶å°‘äº†åˆ—ç»´åº¦
```

**å½©è‰²å›¾åƒçš„é€šé“ç»Ÿè®¡ï¼š**

```python
color_image = np.random.randint(0, 256, (480, 640, 3), dtype=np.uint8)

# æ¯ä¸ªé€šé“çš„å‡å€¼
channel_means = np.mean(color_image, axis=(0, 1))   # æ²¿é«˜åº¦å’Œå®½åº¦å‹ç¼©
print(f"BGR é€šé“å‡å€¼: {channel_means}")
# ç±»ä¼¼ [127.5, 128.0, 127.3]

# æ¯ä¸ªé€šé“çš„æœ€å¤§å€¼
channel_max = np.max(color_image, axis=(0, 1))
print(f"BGR é€šé“æœ€å¤§å€¼: {channel_max}")   # [255, 255, 255]
```

#### 6.3 argmax / argminï¼ˆæ‰¾ä½ç½®ï¼‰

```python
arr = np.array([10, 50, 30, 80, 20])

# æœ€å¤§å€¼çš„ç´¢å¼•ä½ç½®
print(np.argmax(arr))   # 3ï¼ˆç¬¬3ä¸ªå…ƒç´ 80æœ€å¤§ï¼‰
print(np.argmin(arr))   # 0ï¼ˆç¬¬0ä¸ªå…ƒç´ 10æœ€å°ï¼‰

# åœ¨å›¾åƒä¸­æ‰¾åˆ°æœ€äº®/æœ€æš—çš„åƒç´ ä½ç½®
image = np.random.randint(0, 256, (100, 100), dtype=np.uint8)

# np.unravel_index æŠŠä¸€ç»´ç´¢å¼•è½¬æˆäºŒç»´åæ ‡
brightest_idx = np.argmax(image)
brightest_pos = np.unravel_index(brightest_idx, image.shape)
print(f"æœ€äº®åƒç´ ä½ç½®: {brightest_pos}, å€¼: {image[brightest_pos]}")

darkest_idx = np.argmin(image)
darkest_pos = np.unravel_index(darkest_idx, image.shape)
print(f"æœ€æš—åƒç´ ä½ç½®: {darkest_pos}, å€¼: {image[darkest_pos]}")
```

---

### 7. çŸ©é˜µè¿ç®—

çŸ©é˜µè¿ç®—åœ¨è®¡ç®—æœºè§†è§‰ä¸­ç”¨äºå›¾åƒå˜æ¢ï¼ˆæ—‹è½¬ã€ç¼©æ”¾ã€é€è§†å˜æ¢ç­‰ï¼‰ã€‚

#### 7.1 çŸ©é˜µä¹˜æ³•

```python
# æ³¨æ„åŒºåˆ†ï¼š* æ˜¯é€å…ƒç´ ä¹˜æ³•ï¼Œ@ æ˜¯çŸ©é˜µä¹˜æ³•ï¼
A = np.array([[1, 2],
              [3, 4]])
B = np.array([[5, 6],
              [7, 8]])

# é€å…ƒç´ ä¹˜æ³•
print(A * B)
# [[ 5 12]
#  [21 32]]

# çŸ©é˜µä¹˜æ³•ï¼ˆä¸‰ç§ç­‰ä»·å†™æ³•ï¼‰
print(A @ B)            # æ¨èï¼Python 3.5+ æ”¯æŒ
print(np.dot(A, B))     # ç»å…¸å†™æ³•
print(np.matmul(A, B))  # å®Œæ•´å†™æ³•
# [[19 22]
#  [43 50]]
```

```
çŸ©é˜µä¹˜æ³• A @ B çš„è®¡ç®—è¿‡ç¨‹ï¼š

A = [[1, 2],    B = [[5, 6],
     [3, 4]]         [7, 8]]

ç»“æœ[0,0] = 1Ã—5 + 2Ã—7 = 19
ç»“æœ[0,1] = 1Ã—6 + 2Ã—8 = 22
ç»“æœ[1,0] = 3Ã—5 + 4Ã—7 = 43
ç»“æœ[1,1] = 3Ã—6 + 4Ã—8 = 50
```

#### 7.2 å›¾åƒå˜æ¢ä¸­çš„çŸ©é˜µè¿ç®—

```python
# 2D ç‚¹çš„ä»¿å°„å˜æ¢
# å˜æ¢å…¬å¼ï¼š[x', y'] = M @ [x, y, 1]

# æ—‹è½¬çŸ©é˜µï¼ˆæ—‹è½¬45åº¦ï¼‰
angle = np.deg2rad(45)
M = np.array([
    [np.cos(angle), -np.sin(angle), 0],
    [np.sin(angle),  np.cos(angle), 0]
])

# å¯¹ä¸€ä¸ªç‚¹ (100, 50) åšå˜æ¢
point = np.array([100, 50, 1])   # é½æ¬¡åæ ‡
new_point = M @ point
print(f"åŸå§‹ç‚¹: (100, 50)")
print(f"æ—‹è½¬å: ({new_point[0]:.1f}, {new_point[1]:.1f})")

# å‘é‡ç‚¹ç§¯
a = np.array([1, 2, 3])
b = np.array([4, 5, 6])
dot = np.dot(a, b)   # 1Ã—4 + 2Ã—5 + 3Ã—6 = 32
print(f"ç‚¹ç§¯: {dot}")
```

---

## ğŸ’» ä»£ç å®æˆ˜

### å®æˆ˜ç»ƒä¹ ï¼šå›¾åƒè¿ç®—å¤„ç†å™¨

```python
# ===================================================================
# å®æˆ˜ç»ƒä¹ ï¼šå›¾åƒè¿ç®—å¤„ç†å™¨
# ç›®æ ‡ï¼šç»¼åˆè¿ç”¨æ•°ç»„è¿ç®—ã€å¹¿æ’­ã€ç»Ÿè®¡å‡½æ•°
# ===================================================================

import numpy as np

# ---------- 1. äº®åº¦å’Œå¯¹æ¯”åº¦è°ƒæ•´ ----------
print("=" * 55)
print("ğŸ’¡ ç¬¬ä¸€æ­¥ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦è°ƒæ•´")
print("=" * 55)

np.random.seed(42)
image = np.random.randint(50, 200, (6, 8), dtype=np.uint8)
print(f"  åŸå§‹å›¾åƒ:\n{image}\n")

# äº®åº¦å¢åŠ  50
bright = np.clip(image.astype(np.int16) + 50, 0, 255).astype(np.uint8)
print(f"  äº®åº¦+50:\n{bright}\n")

# å¯¹æ¯”åº¦å¢å¼º 1.5 å€ï¼ˆä»¥128ä¸ºä¸­å¿ƒï¼‰
contrast = np.clip((image.astype(np.float32) - 128) * 1.5 + 128, 0, 255).astype(np.uint8)
print(f"  å¯¹æ¯”åº¦x1.5:\n{contrast}\n")

# ---------- 2. å›¾åƒæ··åˆ ----------
print("=" * 55)
print("ğŸ¨ ç¬¬äºŒæ­¥ï¼šå›¾åƒæ··åˆ")
print("=" * 55)

img1 = np.random.randint(0, 256, (4, 6), dtype=np.uint8)
img2 = np.random.randint(0, 256, (4, 6), dtype=np.uint8)
print(f"  å›¾åƒ1:\n{img1}\n")
print(f"  å›¾åƒ2:\n{img2}\n")

# 50% æ··åˆ
blended = (img1.astype(np.float32) * 0.5 +
           img2.astype(np.float32) * 0.5).astype(np.uint8)
print(f"  50%æ··åˆ:\n{blended}\n")

# ---------- 3. å¹¿æ’­åº”ç”¨ ----------
print("=" * 55)
print("ğŸ“¡ ç¬¬ä¸‰æ­¥ï¼šå¹¿æ’­æœºåˆ¶å®æˆ˜")
print("=" * 55)

# æ¯è¡Œåº”ç”¨ä¸åŒæƒé‡ï¼ˆæ¨¡æ‹Ÿæ¸å˜æ•ˆæœï¼‰
h, w = 5, 8
gray = np.full((h, w), 200, dtype=np.float32)
weights = np.linspace(1.0, 0.2, h).reshape(h, 1)   # (5,1) åˆ—å‘é‡

print(f"  æƒé‡: {weights.flatten()}")
gradient = (gray * weights).astype(np.uint8)
print(f"  æ¸å˜ç»“æœ:\n{gradient}\n")

# æ¯ä¸ªé€šé“å‡å»å‡å€¼ï¼ˆå›¾åƒå½’ä¸€åŒ–ï¼‰
color = np.random.randint(0, 256, (3, 4, 3), dtype=np.uint8)
mean_val = np.mean(color, axis=(0, 1))
print(f"  å½©è‰²å›¾é€šé“å‡å€¼: B={mean_val[0]:.1f}, G={mean_val[1]:.1f}, R={mean_val[2]:.1f}")

normalized = color.astype(np.float32) - mean_val   # å¹¿æ’­: (3,4,3) - (3,)
print(f"  å½’ä¸€åŒ–åé€šé“å‡å€¼: {np.mean(normalized, axis=(0,1))}")
# æ¥è¿‘ [0, 0, 0]

# ---------- 4. ç»Ÿè®¡åˆ†æ ----------
print("\n" + "=" * 55)
print("ğŸ“Š ç¬¬å››æ­¥ï¼šå›¾åƒç»Ÿè®¡åˆ†æ")
print("=" * 55)

image = np.random.randint(0, 256, (6, 8), dtype=np.uint8)
print(f"  æµ‹è¯•å›¾åƒ:\n{image}\n")

print(f"  å…¨å±€ç»Ÿè®¡:")
print(f"    å‡å€¼:   {np.mean(image):.1f}")
print(f"    æ ‡å‡†å·®: {np.std(image):.1f}")
print(f"    æœ€å¤§å€¼: {np.max(image)}")
print(f"    æœ€å°å€¼: {np.min(image)}")
print(f"    ä¸­ä½æ•°: {np.median(image):.1f}")

# æ¯è¡Œç»Ÿè®¡
print(f"\n  æ¯è¡Œå‡å€¼: {np.mean(image, axis=1).astype(int)}")
print(f"  æ¯åˆ—å‡å€¼: {np.mean(image, axis=0).astype(int)}")

# æ‰¾æœ€äº®/æœ€æš—åƒç´ 
brightest = np.unravel_index(np.argmax(image), image.shape)
darkest = np.unravel_index(np.argmin(image), image.shape)
print(f"\n  æœ€äº®åƒç´ : ä½ç½®{brightest}, å€¼={image[brightest]}")
print(f"  æœ€æš—åƒç´ : ä½ç½®{darkest}, å€¼={image[darkest]}")

# ---------- 5. çŸ©é˜µè¿ç®— ----------
print("\n" + "=" * 55)
print("ğŸ”¢ ç¬¬äº”æ­¥ï¼šçŸ©é˜µè¿ç®—")
print("=" * 55)

# 2Dæ—‹è½¬
angle_deg = 30
angle = np.deg2rad(angle_deg)
R = np.array([
    [np.cos(angle), -np.sin(angle)],
    [np.sin(angle),  np.cos(angle)]
])

points = np.array([[100, 0], [0, 100], [50, 50]])
print(f"  æ—‹è½¬çŸ©é˜µ ({angle_deg}Â°):\n{R}\n")

for p in points:
    rotated = R @ p
    print(f"  ({p[0]:>3d}, {p[1]:>3d}) â†’ ({rotated[0]:>7.1f}, {rotated[1]:>7.1f})")
```

**è¿è¡Œè¾“å‡ºç¤ºä¾‹ï¼š**

```
=======================================================
ğŸ’¡ ç¬¬ä¸€æ­¥ï¼šäº®åº¦ä¸å¯¹æ¯”åº¦è°ƒæ•´
=======================================================
  åŸå§‹å›¾åƒ:
[[152 136 135 ...]]

  äº®åº¦+50:
[[202 186 185 ...]]

=======================================================
ğŸ“¡ ç¬¬ä¸‰æ­¥ï¼šå¹¿æ’­æœºåˆ¶å®æˆ˜
=======================================================
  æƒé‡: [1.  0.8 0.6 0.4 0.2]
  æ¸å˜ç»“æœ:
[[200 200 200 200 200 200 200 200]
 [160 160 160 160 160 160 160 160]
 [120 120 120 120 120 120 120 120]
 [ 80  80  80  80  80  80  80  80]
 [ 40  40  40  40  40  40  40  40]]

=======================================================
ğŸ”¢ ç¬¬äº”æ­¥ï¼šçŸ©é˜µè¿ç®—
=======================================================
  æ—‹è½¬çŸ©é˜µ (30Â°):
  ...
  (100,   0) â†’ (   86.6,    50.0)
  (  0, 100) â†’ (  -50.0,    86.6)
  ( 50,  50) â†’ (   18.3,    68.3)
```

---

## ğŸš¨ å¸¸è§é—®é¢˜ä¸æ˜“é”™ç‚¹

### Q1: æ•°ç»„è¿ç®—æ—¶ uint8 æº¢å‡ºæ€ä¹ˆåŠï¼Ÿ

```python
# é—®é¢˜ï¼šuint8 èŒƒå›´åªæœ‰ 0~255
a = np.array([200, 100], dtype=np.uint8)
b = np.array([100, 200], dtype=np.uint8)

# âŒ ç›´æ¥åŠ æ³•æº¢å‡º
print(a + b)   # [ 44  44]  (200+100=300, 300-256=44)

# âœ… è§£å†³æ–¹æ¡ˆï¼šå…ˆè½¬æˆæ›´å¤§çš„ç±»å‹
result = np.clip(a.astype(np.int16) + b.astype(np.int16), 0, 255).astype(np.uint8)
print(result)  # [255 255]
```

### Q2: * æ˜¯é€å…ƒç´ ä¹˜æ³•è¿˜æ˜¯çŸ©é˜µä¹˜æ³•ï¼Ÿ

```python
A = np.array([[1, 2], [3, 4]])
B = np.array([[5, 6], [7, 8]])

# * â†’ é€å…ƒç´ ä¹˜æ³•ï¼ˆHadamard ç§¯ï¼‰
print(A * B)   # [[ 5 12] [21 32]]

# @ â†’ çŸ©é˜µä¹˜æ³•
print(A @ B)   # [[19 22] [43 50]]

# è®°å¿†ï¼š* æ˜¯"é€ä¸ª"ï¼Œ@ æ˜¯"çŸ©é˜µ"
```

### Q3: axis=0 å’Œ axis=1 æ€»æ˜¯ææ··ï¼Ÿ

```python
# è®°å¿†æŠ€å·§ï¼šaxis æ˜¯"è¢«æ¶ˆé™¤çš„ç»´åº¦"
arr = np.array([[1, 2, 3],
                [4, 5, 6]])    # shape (2, 3)

# axis=0: æ¶ˆé™¤ç¬¬0ç»´(è¡Œ) â†’ ç»“æœshape (3,) â†’ æ¯åˆ—çš„ç»Ÿè®¡
print(np.sum(arr, axis=0))   # [5 7 9]

# axis=1: æ¶ˆé™¤ç¬¬1ç»´(åˆ—) â†’ ç»“æœshape (2,) â†’ æ¯è¡Œçš„ç»Ÿè®¡
print(np.sum(arr, axis=1))   # [ 6 15]

# å¦ä¸€ç§è®°å¿†ï¼š
# axis=0 â†’ "å‘ä¸‹"å‹ç¼©ï¼ˆçºµå‘ç»Ÿè®¡ï¼‰
# axis=1 â†’ "å‘å³"å‹ç¼©ï¼ˆæ¨ªå‘ç»Ÿè®¡ï¼‰
```

### Q4: å¹¿æ’­å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

```python
# ä¸èƒ½å¹¿æ’­çš„æƒ…å†µï¼š
a = np.ones((3, 4))    # (3, 4)
b = np.ones((3,))      # (3,)

# âŒ (3, 4) + (3,) â†’ ä»å³æ¯”è¾ƒ: 4 vs 3, ä¸åŒ¹é…ï¼
# a + b   # ValueError!

# âœ… è§£å†³ï¼šæŠŠ b å˜æˆåˆ—å‘é‡ (3, 1)
result = a + b.reshape(3, 1)   # (3, 4) + (3, 1) â†’ å¯ä»¥å¹¿æ’­
print(result.shape)   # (3, 4)
```

---

## ğŸ¯ æ€»ç»“

æœ¬èŠ‚å­¦ä¹ äº† NumPy æ•°ç»„çš„è¿ç®—ï¼š

âœ… **ç®—æœ¯è¿ç®—**ï¼š`+` `-` `*` `/`ï¼ˆé€å…ƒç´ ï¼‰ï¼Œå›¾åƒäº®åº¦/å¯¹æ¯”åº¦è°ƒæ•´
âœ… **æ ‡é‡è¿ç®—**ï¼šæ•°ç»„ Â± æ•°å­—ï¼Œå½’ä¸€åŒ– `/255.0`
âœ… **å›¾åƒæ··åˆ**ï¼š`Î±*img1 + Î²*img2`ï¼ŒåŠ æƒæ±‚å’Œ
âœ… **å¹¿æ’­æœºåˆ¶**ï¼šä¸åŒå½¢çŠ¶æ•°ç»„è‡ªåŠ¨åŒ¹é…ï¼Œä»å³å¯¹é½ï¼Œç»´åº¦ä¸º1å¯æ‰©å±•
âœ… **ç»Ÿè®¡å‡½æ•°**ï¼š`sum`ã€`mean`ã€`std`ã€`max`ã€`min`ï¼Œ`axis` æŒ‰ç»´åº¦ç»Ÿè®¡
âœ… **çŸ©é˜µè¿ç®—**ï¼š`@` çŸ©é˜µä¹˜æ³•ï¼ˆåŒºåˆ«äº `*` é€å…ƒç´ ä¹˜æ³•ï¼‰
âœ… **å®ç”¨å‡½æ•°**ï¼š`np.clip`ï¼ˆè£å‰ªï¼‰ã€`np.argmax`ï¼ˆæ‰¾æœ€å¤§å€¼ä½ç½®ï¼‰

> ğŸ”‘ **æ ¸å¿ƒè¦ç‚¹ï¼š** å›¾åƒå¤„ç† = æ•°ç»„è¿ç®—ã€‚äº®åº¦è°ƒæ•´æ˜¯åŠ å‡ï¼Œå¯¹æ¯”åº¦æ˜¯ä¹˜é™¤ï¼Œæ··åˆæ˜¯åŠ æƒæ±‚å’Œï¼Œå½’ä¸€åŒ–æ˜¯å‡å‡å€¼é™¤æ ‡å‡†å·®ã€‚æŒæ¡å¹¿æ’­æœºåˆ¶å¯ä»¥è®©ä½ ç”¨ä¸€è¡Œä»£ç å®Œæˆå¤æ‚çš„æ‰¹é‡æ“ä½œã€‚

**ä¸‹ä¸€æ­¥ï¼š**
ğŸ‘‰ [04 - æ•°ç»„å½¢çŠ¶æ“ä½œ](../04-æ•°ç»„å½¢çŠ¶æ“ä½œ/æ•°ç»„å½¢çŠ¶æ“ä½œ.md)

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [NumPy å®˜æ–¹æ–‡æ¡£ - å¹¿æ’­](https://numpy.org/doc/stable/user/basics.broadcasting.html)
- [NumPy å®˜æ–¹æ–‡æ¡£ - æ•°å­¦å‡½æ•°](https://numpy.org/doc/stable/reference/routines.math.html)
- [NumPy å®˜æ–¹æ–‡æ¡£ - ç»Ÿè®¡å‡½æ•°](https://numpy.org/doc/stable/reference/routines.statistics.html)
